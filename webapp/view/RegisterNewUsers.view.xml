<mvc:View
    controllerName="com.lab2dev.finalprojectprodev.controller.RegisterNewUsers"
    xmlns:cards="sap.f.cards"
    xmlns:mvc="sap.ui.core.mvc"
    displayBlock="true"
    xmlns="sap.m"
    xmlns:table="sap.ui.table"
    xmlns:m="sap.m"
    xmlns:u="sap.ui.unified"
    xmlns:core="sap.ui.core"
    xmlns:l="sap.ui.layout"
>
    <Page
        id="page"
        showHeader="false"
    >

            <ObjectHeader
                title="Cadastro"
                responsive="true" 
                >
                    <headerContainer>
                        <HeaderContainer >
                            <l:VerticalLayout>
                                <Breadcrumbs class="sapUiTinyMarginTop sapUiLargeMarginBottom" currentLocationText="Novo usuário">
                                    <Link text="Cadastro" />
                                </Breadcrumbs>

                                <l:VerticalLayout class="sapUiSmallMarginBottom">
                                    <Title
                                        text="Importar Usuários"
                                        level="H2"/>
                                    <HBox
                                        alignItems="Center">
                                        <u:FileUploader
                                            id="ImportUserDialog"
                                            width="25rem"
                                            name="myFileUpload"
                                            tooltip="Clique e escolha um arquivo .CSV"
                                            placeholder="Clique e escolha um arquivo .CSV"
                                            uploadUrl=""
                                            fileType="CSV"
                                            buttonText="Importar"
                                            style="Emphasized"
                                            change="handleUploadStart"
                                            uploadComplete="handleUploadComplete"
                                            />
                                    </HBox>
                                </l:VerticalLayout>
                            </l:VerticalLayout> 
                        </HeaderContainer>
                    </headerContainer>
            </ObjectHeader>
            <content >
            <VBox
                fitContainer="true"
                class="sapUiResponsiveMargin"
                visible="{/viewDetails/tableVisible}"
            >
                <HBox  
                    height="100%">
                    <!-- Verificar com o joão uma forma de EDITAR essa TABLE já que a property editable n funciona -->
                    <table:Table
                        id="UsersPreRegisterTable"
                        rows="{/Users-PreRegister}"
                        selectionMode="None"
                        paste="onPaste"
                        rowMode="Auto"
                    >
                        <table:extension>
                            <m:OverflowToolbar height="3rem" >
                                <m:Title            
                                    class="sapUiTinyMargin"
                                    id="title"
                                    text="Pré-cadastros do arquivo ({/viewDetails/totalRegistrations})"
                                />
                                <ToolbarSpacer />
                                <SearchField placeholder="Pesquisar" width="13.75rem" liveChange=".onSearch"></SearchField>
                                <Button type="Emphasized" text="Habilitar edição"></Button>
                            </m:OverflowToolbar>
                        </table:extension>
                        <table:columns>
                            <table:Column>
                                <m:Label
                                    design="Bold"
                                    text="Name"
                                />
                                <table:template>
                                    <m:Text text="{FullName}" />
                                </table:template>
                            </table:Column>
                            <table:Column>
                                <m:Label
                                    design="Bold"
                                    text="Empresa"
                                />
                                <table:template>
                                    <m:Text text="{CompanyName}" />
                                </table:template>
                            </table:Column>
                            <table:Column>
                                <m:Label
                                    design="Bold"
                                    text="Cargo"
                                />
                                <table:template>
                                    <m:Text text="{JobTitle}" />
                                </table:template>
                            </table:Column>
                            <table:Column>
                                <m:Label
                                    design="Bold"
                                    text="Grupo de acesso"
                                />
                                <table:template>
                                    <m:Text text="{AccessGroup}" />
                                </table:template>
                            </table:Column>
                            <table:Column>
                                <m:Label
                                    design="Bold"
                                    text="E-mail"
                                />
                                <table:template>
                                    <m:Text
                                        wrapping="false"
                                        text="{Email}"
                                    />
                                </table:template>
                            </table:Column>
                            <table:Column>
                                <m:Label
                                    design="Bold"
                                    text="CPF"
                                />
                                <table:template>
                                    <m:Text text="{CPF}" />
                                </table:template>
                            </table:Column>
                            <table:Column width="3.1rem">
                                <table:template>
                                    <m:Button
                                        id="DeleteUserDialog"
                                        type="Transparent"
                                        icon="sap-icon://delete"
                                        press=".onOpenDeleteDialog"
                                    />
                                </table:template>
                            </table:Column>
                        </table:columns>
                    </table:Table>
                </HBox>
            </VBox>
        </content>

        <footer>
            <OverflowToolbar>
                <ToolbarSpacer />
                <Button
                    id="CreateUserManuallyDialog"
                    type="Emphasized"
                    text="Inserir Usuário manualmente"
                    press=".onOpenDialog"
                />
                <Button
                    id="ConfirmUserImportDialog"
                    type="Emphasized"
                    text="Confirmar importação"
                    press=".onOpenDialog"
                />
                <Button
                    id="CancelUserImportDialog"
                    class="sap-xp-StandardButton sapUiTinyMarginEnd"
                    type="Transparent"
                    text="Cancelar importação"
                    press=".onOpenDialog"
                />
            </OverflowToolbar>
        </footer>
    </Page>
</mvc:View>
